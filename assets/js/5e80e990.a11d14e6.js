"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[5268],{6129:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>o,contentTitle:()=>l,default:()=>d,frontMatter:()=>r,metadata:()=>i,toc:()=>p});const i=JSON.parse('{"id":"examples/python-examples","title":"Python Examples","description":"Complete working example demonstrating TrainLoop LLM evaluation with Python.","source":"@site/docs/examples/python-examples.md","sourceDirName":"examples","slug":"/examples/python-examples","permalink":"/examples/python-examples","draft":false,"unlisted":false,"editUrl":"https://github.com/trainloop/evals/tree/main/docs/docs/examples/python-examples.md","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"sidebar_position":2},"sidebar":"docsSidebar","previous":{"title":"Examples","permalink":"/examples/"},"next":{"title":"TypeScript Examples","permalink":"/examples/typescript-examples"}}');var s=t(4848),a=t(8453);const r={sidebar_position:2},l="Python Examples",o={},p=[{value:"Overview",id:"overview",level:2},{value:"Prerequisites",id:"prerequisites",level:2},{value:"Quick Setup",id:"quick-setup",level:2},{value:"Run Examples",id:"run-examples",level:2},{value:"Evaluate Results",id:"evaluate-results",level:2},{value:"Key Components",id:"key-components",level:2},{value:"AI Request Utility (<code>ai_request.py</code>)",id:"ai-request-utility-ai_requestpy",level:3},{value:"TrainLoop Integration",id:"trainloop-integration",level:3},{value:"Expected Output",id:"expected-output",level:2},{value:"Next Steps",id:"next-steps",level:2}];function c(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,a.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"python-examples",children:"Python Examples"})}),"\n",(0,s.jsx)(n.p,{children:"Complete working example demonstrating TrainLoop LLM evaluation with Python."}),"\n",(0,s.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,s.jsx)(n.p,{children:"The Python examples demonstrate two core evaluation scenarios:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Code Generation"}),": Testing LLM ability to write valid Python code"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Letter Counting"}),": Testing basic counting accuracy"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Python 3.8+"}),"\n",(0,s.jsx)(n.li,{children:"OpenAI API key (or other supported LLM provider)"}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"quick-setup",children:"Quick Setup"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"# Navigate to Python examples\ncd examples/python\n\n# Create and activate virtual environment\npython -m venv venv\nsource venv/bin/activate  # On Windows: venv\\Scripts\\activate\n\n# Install dependencies\npip install -r requirements.txt\n\n# Create .env file with API keys\ncp .env.example .env\n"})}),"\n",(0,s.jsx)(n.h2,{id:"run-examples",children:"Run Examples"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"# Code generation example (evaluates if LLM can write valid code)\npython writes_valid_code.py\n\n# Letter counting example (evaluates counting accuracy)\npython counter_agent.py\n\n# Run each script 3-4 times to collect samples\n# Check collected data in trainloop/data/events/\n"})}),"\n",(0,s.jsx)(n.h2,{id:"evaluate-results",children:"Evaluate Results"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"# Install TrainLoop CLI globally (recommended)\npipx install trainloop-cli\n\n# Or install in virtual environment\npip install -e ../../cli\n\n# Check that it installed correctly\ntrainloop --version\n\n# Run evaluation\ncd trainloop\ntrainloop eval\n"})}),"\n",(0,s.jsx)(n.h2,{id:"key-components",children:"Key Components"}),"\n",(0,s.jsxs)(n.h3,{id:"ai-request-utility-ai_requestpy",children:["AI Request Utility (",(0,s.jsx)(n.code,{children:"ai_request.py"}),")"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:'from openai import OpenAI\nfrom dotenv import load_dotenv\n\nload_dotenv()\nclient = OpenAI()\n\ndef make_ai_request(\n    prompt: str,\n    model: str = "gpt-4.1",\n    max_tokens: int = 500,\n    extra_headers: dict = {},\n):\n    # Makes request with TrainLoop instrumentation\n    response = client.chat.completions.create(\n        model=model,\n        messages=[{"role": "user", "content": prompt}],\n        max_tokens=max_tokens,\n        extra_headers=extra_headers,\n    )\n    return response.choices[0].message.content\n'})}),"\n",(0,s.jsx)(n.h3,{id:"trainloop-integration",children:"TrainLoop Integration"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:'from trainloop_llm_logging import collect, trainloop_tag\n\n# CRITICAL: Import and call collect BEFORE importing OpenAI\ncollect(flush_immediately=True)\n\nfrom ai_request import make_ai_request\n\n# Tag requests for evaluation suites\nheaders = trainloop_tag("code-generation")\nresponse = make_ai_request(prompt, extra_headers=headers)\n'})}),"\n",(0,s.jsx)(n.h2,{id:"expected-output",children:"Expected Output"}),"\n",(0,s.jsx)(n.p,{children:"When you run the examples, you'll see:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:'[TrainLoop] Loading config...\n[TrainLoop] Loaded TrainLoop config from trainloop/trainloop.config.yaml\nAI Response: def factorial(n):\n    if n < 0:\n        raise ValueError("Input must be a non-negative integer")\n    elif n == 0 or n == 1:\n        return 1\n    else:\n        return n * factorial(n-1)\n'})}),"\n",(0,s.jsx)(n.h2,{id:"next-steps",children:"Next Steps"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"/examples/typescript-examples",children:"View TypeScript Examples"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"/examples/go-examples",children:"View Go Examples"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"/tutorials/advanced-metrics",children:"Learn about Custom Metrics"})}),"\n"]})]})}function d(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(c,{...e})}):c(e)}},8453:(e,n,t)=>{t.d(n,{R:()=>r,x:()=>l});var i=t(6540);const s={},a=i.createContext(s);function r(e){const n=i.useContext(a);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:r(e.components),i.createElement(a.Provider,{value:n},e.children)}}}]);
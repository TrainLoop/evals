"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[8864],{4087:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>a,contentTitle:()=>s,default:()=>d,frontMatter:()=>l,metadata:()=>i,toc:()=>c});const i=JSON.parse('{"id":"examples/go-examples","title":"Go Examples","description":"Complete working example demonstrating TrainLoop LLM evaluation with Go.","source":"@site/docs/examples/go-examples.md","sourceDirName":"examples","slug":"/examples/go-examples","permalink":"/examples/go-examples","draft":false,"unlisted":false,"editUrl":"https://github.com/trainloop/evals/tree/main/docs/docs/examples/go-examples.md","tags":[],"version":"current","sidebarPosition":4,"frontMatter":{"sidebar_position":4},"sidebar":"docsSidebar","previous":{"title":"TypeScript Examples","permalink":"/examples/typescript-examples"},"next":{"title":"Understanding TrainLoop Evals","permalink":"/explanation/"}}');var o=t(4848),r=t(8453);const l={sidebar_position:4},s="Go Examples",a={},c=[{value:"Overview",id:"overview",level:2},{value:"Prerequisites",id:"prerequisites",level:2},{value:"Quick Setup",id:"quick-setup",level:2},{value:"Run Examples",id:"run-examples",level:2},{value:"Evaluate Results",id:"evaluate-results",level:2},{value:"Key Components",id:"key-components",level:2},{value:"AI Request Utility (<code>ai_request.go</code>)",id:"ai-request-utility-ai_requestgo",level:3},{value:"TrainLoop Integration",id:"trainloop-integration",level:3},{value:"Important Notes",id:"important-notes",level:2},{value:"Import Path",id:"import-path",level:3},{value:"Initialization Order",id:"initialization-order",level:3},{value:"Expected Output",id:"expected-output",level:2},{value:"Project Structure",id:"project-structure",level:2},{value:"Next Steps",id:"next-steps",level:2}];function p(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.header,{children:(0,o.jsx)(n.h1,{id:"go-examples",children:"Go Examples"})}),"\n",(0,o.jsx)(n.p,{children:"Complete working example demonstrating TrainLoop LLM evaluation with Go."}),"\n",(0,o.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,o.jsx)(n.p,{children:"The Go examples demonstrate two core evaluation scenarios:"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Code Generation"}),": Testing LLM ability to write valid Python code"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Letter Counting"}),": Testing basic counting accuracy"]}),"\n"]}),"\n",(0,o.jsx)(n.h2,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"Go 1.20+"}),"\n",(0,o.jsx)(n.li,{children:"OpenAI API key (or other supported LLM provider)"}),"\n"]}),"\n",(0,o.jsx)(n.h2,{id:"quick-setup",children:"Quick Setup"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:'# Navigate to Go examples\ncd examples/go\n\n# Install Go dependencies\ngo mod tidy\n\n# Note: If you encounter import issues with trainloop-llm-logging,\n# the examples use the GitHub import path:\n# import trainloop "github.com/trainloop/evals/sdk/go/trainloop-llm-logging"\n\n# Create .env file with API keys\ncp .env.example .env\n'})}),"\n",(0,o.jsx)(n.h2,{id:"run-examples",children:"Run Examples"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"# Code generation example (evaluates if LLM can write valid code)\ngo run ai_request.go writes_valid_code.go\n\n# Letter counting example (evaluates counting accuracy)  \ngo run ai_request.go counter_agent.go\n\n# Run each script 3-4 times to collect samples\n# Check collected data in trainloop/data/events/\n"})}),"\n",(0,o.jsx)(n.h2,{id:"evaluate-results",children:"Evaluate Results"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"# Install TrainLoop CLI globally (recommended)\npipx install trainloop-cli\n\n# Check that it installed correctly\ntrainloop --version\n\n# Run evaluation\ncd trainloop\ntrainloop eval\n"})}),"\n",(0,o.jsx)(n.h2,{id:"key-components",children:"Key Components"}),"\n",(0,o.jsxs)(n.h3,{id:"ai-request-utility-ai_requestgo",children:["AI Request Utility (",(0,o.jsx)(n.code,{children:"ai_request.go"}),")"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-go",children:'package main\n\nimport (\n    "context"\n    "fmt"\n    "os"\n    \n    "github.com/joho/godotenv"\n    "github.com/sashabaranov/go-openai"\n)\n\nfunc init() {\n    godotenv.Load()\n}\n\nfunc MakeAIRequest(prompt, model string, maxTokens int, extraHeaders map[string]string) (string, error) {\n    if model == "" {\n        model = "gpt-4"\n    }\n\n    client := openai.NewClient(os.Getenv("OPENAI_API_KEY"))\n    \n    req := openai.ChatCompletionRequest{\n        Model:     model,\n        MaxTokens: maxTokens,\n        Messages: []openai.ChatCompletionMessage{\n            {\n                Role:    openai.ChatMessageRoleUser,\n                Content: prompt,\n            },\n        },\n    }\n\n    resp, err := client.CreateChatCompletion(context.Background(), req)\n    if err != nil {\n        return "", fmt.Errorf("chat completion error: %v", err)\n    }\n\n    return resp.Choices[0].Message.Content, nil\n}\n'})}),"\n",(0,o.jsx)(n.h3,{id:"trainloop-integration",children:"TrainLoop Integration"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-go",children:'package main\n\nimport (\n    "fmt"\n    "log"\n    \n    trainloop "github.com/trainloop/evals/sdk/go/trainloop-llm-logging"\n)\n\nfunc init() {\n    // CRITICAL: Call Collect() in init() BEFORE making AI requests\n    trainloop.Collect()\n}\n\nfunc main() {\n    // Tag requests for evaluation suites\n    headers := trainloop.TrainloopTag("code-generation")\n    response, err := MakeAIRequest(promptText, "gpt-4", 500, headers)\n    if err != nil {\n        log.Fatalf("Error: %v", err)\n    }\n    \n    fmt.Printf("AI Response: %s\\n", response)\n}\n'})}),"\n",(0,o.jsx)(n.h2,{id:"important-notes",children:"Important Notes"}),"\n",(0,o.jsx)(n.h3,{id:"import-path",children:"Import Path"}),"\n",(0,o.jsx)(n.p,{children:"Use the GitHub import path for the TrainLoop SDK:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-go",children:'import trainloop "github.com/trainloop/evals/sdk/go/trainloop-llm-logging"\n'})}),"\n",(0,o.jsx)(n.h3,{id:"initialization-order",children:"Initialization Order"}),"\n",(0,o.jsxs)(n.p,{children:["The ",(0,o.jsx)(n.code,{children:"trainloop.Collect()"})," call must happen in ",(0,o.jsx)(n.code,{children:"init()"})," before any AI requests:"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-go",children:"func init() {\n    trainloop.Collect()\n}\n"})}),"\n",(0,o.jsx)(n.h2,{id:"expected-output",children:"Expected Output"}),"\n",(0,o.jsx)(n.p,{children:"When you run the examples, you'll see:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{children:'AI Response: def factorial(n):\n    if n < 0:\n        raise ValueError("n must be a non-negative integer")\n    elif n == 0 or n == 1:\n        return 1\n    else:\n        return n * factorial(n-1)\n'})}),"\n",(0,o.jsx)(n.h2,{id:"project-structure",children:"Project Structure"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{children:"go/\n\u251c\u2500\u2500 ai_request.go          # AI request utility functions\n\u251c\u2500\u2500 writes_valid_code.go   # Code generation example\n\u251c\u2500\u2500 counter_agent.go       # Letter counting example\n\u251c\u2500\u2500 go.mod                 # Go module definition\n\u251c\u2500\u2500 go.sum                 # Go module checksums\n\u2514\u2500\u2500 trainloop/            # Evaluation configuration\n    \u251c\u2500\u2500 eval/\n    \u2502   \u251c\u2500\u2500 metrics/      # Custom metrics\n    \u2502   \u2514\u2500\u2500 suites/       # Evaluation suites\n    \u2514\u2500\u2500 data/\n        \u251c\u2500\u2500 events/       # Collected LLM interactions\n        \u2514\u2500\u2500 results/      # Evaluation results\n"})}),"\n",(0,o.jsx)(n.h2,{id:"next-steps",children:"Next Steps"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:(0,o.jsx)(n.a,{href:"/examples/python-examples",children:"View Python Examples"})}),"\n",(0,o.jsx)(n.li,{children:(0,o.jsx)(n.a,{href:"/examples/typescript-examples",children:"View TypeScript Examples"})}),"\n",(0,o.jsx)(n.li,{children:(0,o.jsx)(n.a,{href:"/tutorials/advanced-metrics",children:"Learn about Custom Metrics"})}),"\n"]})]})}function d(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(p,{...e})}):p(e)}},8453:(e,n,t)=>{t.d(n,{R:()=>l,x:()=>s});var i=t(6540);const o={},r=i.createContext(o);function l(e){const n=i.useContext(r);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function s(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:l(e.components),i.createElement(r.Provider,{value:n},e.children)}}}]);